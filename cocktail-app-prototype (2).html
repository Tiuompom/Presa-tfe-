<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CocktailBook - Carnet de Recettes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #f5f1e8 0%, #faf6f0 100%);
            min-height: 100vh;
            color: #2c1810;
            overflow-x: hidden;
        }

        /* Background texture */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(120, 100, 80, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(120, 100, 80, 0.03) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        .app-container {
            max-width: 414px;
            margin: 0 auto;
            min-height: 100vh;
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 30px rgba(0,0,0,0.1);
            position: relative;
            padding-bottom: 80px;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #8b4513 0%, #a0522d 100%);
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            position: relative;
        }

        .header::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            right: 0;
            height: 5px;
            background: repeating-linear-gradient(
                90deg,
                #654321 0px,
                #654321 20px,
                #8b4513 20px,
                #8b4513 40px
            );
        }

        .header h1 {
            font-size: 1.8rem;
            font-weight: normal;
            letter-spacing: 1px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .back-btn {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: background-color 0.3s;
        }

        .back-btn:hover {
            background: rgba(255,255,255,0.2);
        }

        /* Content area */
        .content {
            padding: 20px;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="30"><defs><pattern id="lines" x="0" y="0" width="100" height="30" patternUnits="userSpaceOnUse"><line x1="0" y1="29" x2="100" y2="29" stroke="%23d4b896" stroke-width="1" opacity="0.3"/></pattern></defs><rect width="100" height="30" fill="url(%23lines)"/></svg>');
        }

        /* Cards */
        .cahier-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 2px solid #d4b896;
            position: relative;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .cahier-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }

        .cahier-card::before {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            border: 1px dashed #d4b896;
            border-radius: 10px;
            pointer-events: none;
        }

        .cahier-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .cahier-card h3 {
            color: #8b4513;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .cahier-card p {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .add-cahier-btn {
            background: linear-gradient(135deg, #d4b896 0%, #c9a876 100%);
            color: #8b4513;
            border: none;
            border-radius: 15px;
            padding: 20px;
            width: 100%;
            font-size: 1.1rem;
            cursor: pointer;
            margin-top: 15px;
            transition: transform 0.3s;
            font-family: inherit;
            font-weight: bold;
        }

        .add-cahier-btn:hover {
            transform: translateY(-2px);
        }

        /* Recipe cards */
        .recipe-card {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            border-left: 4px solid #d4b896;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .recipe-card:hover {
            transform: translateX(5px);
        }

        .recipe-card h4 {
            color: #8b4513;
            margin-bottom: 8px;
        }

        .recipe-card .creator {
            color: #666;
            font-size: 0.9rem;
            font-style: italic;
        }

        .tags {
            display: flex;
            gap: 8px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .tag {
            background: #f0e6d2;
            color: #8b4513;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            border: 1px solid #d4b896;
        }

        /* Recipe page flip */
        .recipe-page {
            perspective: 1000px;
            height: 600px;
            position: relative;
            margin: 20px 0;
        }

        .recipe-flip {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
        }

        .recipe-flip.flipped {
            transform: rotateY(180deg);
        }

        .recipe-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }

        .recipe-verso {
            background: linear-gradient(135deg, white 0%, #faf6f0 100%);
            border: 2px solid #d4b896;
        }

        .recipe-recto {
            background: linear-gradient(135deg, #faf6f0 0%, white 100%);
            border: 2px solid #d4b896;
            transform: rotateY(180deg);
        }

        .recipe-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(45deg, #d4b896, #c9a876);
            border-radius: 10px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
        }

        .recipe-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-family: inherit;
            font-weight: bold;
            transition: transform 0.3s;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn-like {
            background: #ff6b6b;
            color: white;
        }

        .btn-add {
            background: #4ecdc4;
            color: white;
            flex: 1;
        }

        .ingredients {
            margin-bottom: 20px;
        }

        .ingredient-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px dotted #d4b896;
        }

        .steps {
            margin-bottom: 20px;
        }

        .step-item {
            margin-bottom: 12px;
            padding-left: 20px;
            position: relative;
        }

        .step-item::before {
            content: counter(step-counter);
            counter-increment: step-counter;
            position: absolute;
            left: 0;
            top: 0;
            background: #d4b896;
            color: #8b4513;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .steps {
            counter-reset: step-counter;
        }

        /* Swipe discovery */
        .swipe-container {
            position: relative;
            height: 600px;
            padding: 20px;
        }

        .swipe-card {
            position: absolute;
            width: calc(100% - 40px);
            height: 100%;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            border: 3px solid #d4b896;
            padding: 20px;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .swipe-card {
            position: absolute;
            width: calc(100% - 40px);
            height: 100%;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            border: 3px solid #d4b896;
            padding: 20px;
            cursor: pointer;
            transition: transform 0.3s;
            z-index: 3;
        }

        .swipe-card:nth-child(2) {
            transform: scale(0.95) translateY(10px);
            z-index: 2;
        }

        .swipe-card:nth-child(3) {
            transform: scale(0.9) translateY(20px);
            z-index: 1;
        }

        .swipe-actions {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .swipe-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .swipe-btn:hover {
            transform: scale(1.1);
        }

        .swipe-reject {
            background: #ff6b6b;
            color: white;
        }

        .swipe-like {
            background: #4ecdc4;
            color: white;
        }

        /* Bottom navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 414px;
            background: linear-gradient(135deg, #8b4513 0%, #a0522d 100%);
            padding: 15px 0;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.2);
            z-index: 100;
        }

        .nav-items {
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: rgba(255,255,255,0.7);
            cursor: pointer;
            transition: color 0.3s;
            text-decoration: none;
            min-width: 60px;
        }

        .nav-item.active,
        .nav-item:hover {
            color: white;
        }

        .nav-item span {
            font-size: 1.2rem;
            margin-bottom: 5px;
        }

        .nav-item small {
            font-size: 0.7rem;
        }

        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #8b4513;
            font-weight: bold;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #d4b896;
            border-radius: 10px;
            font-family: inherit;
            background: white;
        }

        .form-group textarea {
            height: 100px;
            resize: vertical;
        }

        /* Profile */
        .profile-header {
            text-align: center;
            padding: 30px 20px;
            background: linear-gradient(135deg, #faf6f0 0%, white 100%);
            border-bottom: 2px solid #d4b896;
        }

        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(45deg, #d4b896, #c9a876);
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
            border: 3px solid #8b4513;
        }

        .profile-stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 1.5rem;
            font-weight: bold;
            color: #8b4513;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #666;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin: 20px;
            max-width: 350px;
            width: 100%;
            border: 2px solid #d4b896;
        }

        .hidden {
            display: none !important;
        }

        .show {
            display: block !important;
        }

        /* Pro space */
        .pro-code-input {
            text-align: center;
            padding: 20px;
        }

        .code-input {
            font-size: 2rem;
            text-align: center;
            letter-spacing: 10px;
            width: 200px;
            margin: 20px auto;
        }

        /* Settings */
        .settings-item {
            padding: 15px 0;
            border-bottom: 1px solid #e0e0e0;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .settings-item:last-child {
            border-bottom: none;
        }

        /* Pop-up de confirmation */
        .confirmation-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .confirmation-popup {
            background: white;
            border-radius: 20px;
            padding: 30px 25px;
            margin: 20px;
            max-width: 320px;
            width: 100%;
            border: 3px solid #d4b896;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            text-align: center;
            animation: popIn 0.3s ease-out;
        }

        @keyframes popIn {
            from {
                transform: scale(0.8);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .confirmation-popup h3 {
            color: #8b4513;
            margin-bottom: 15px;
            font-size: 1.4rem;
        }

        .confirmation-popup p {
            color: #666;
            margin-bottom: 20px;
            line-height: 1.4;
        }

        .confirmation-popup .recipe-name {
            color: #8b4513;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .confirmation-popup .cahier-name {
            color: #8b4513;
            font-weight: bold;
        }

        .confirmation-btn {
            background: linear-gradient(135deg, #8b4513 0%, #a0522d 100%);
            color: white;
            border: none;
            border-radius: 15px;
            padding: 12px 25px;
            font-family: inherit;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s;
        }

        /* Menu 3 points */
        .recipe-menu {
            position: relative;
            display: inline-block;
            z-index: 50;
        }

        .menu-dots {
            background: none;
            border: none;
            font-size: 1.2rem;
            color: #8b4513;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: background-color 0.3s;
        }

        .menu-dots:hover {
            background: rgba(139, 69, 19, 0.1);
        }

        .menu-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border: 2px solid #d4b896;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 200;
            min-width: 150px;
            display: none;
        }

        .menu-dropdown.show {
            display: block;
        }

        .menu-item {
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid #f0e6d2;
            transition: background-color 0.3s;
            font-size: 0.9rem;
        }

        .menu-item:last-child {
            border-bottom: none;
        }

        .menu-item:hover {
            background: #f9f6f0;
        }

        .menu-item:first-child {
            border-radius: 8px 8px 0 0;
        }

        .menu-item:last-child {
            border-radius: 0 0 8px 8px;
        }

        .menu-item.delete {
            color: #dc3545;
        }

        .menu-item.delete:hover {
            background: #ffe6e6;
        }

        /* Pop-up de suppression (version rouge) */
        .delete-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .delete-popup {
            background: white;
            border-radius: 20px;
            padding: 30px 25px;
            margin: 20px;
            max-width: 320px;
            width: 100%;
            border: 3px solid #dc3545;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            text-align: center;
            animation: popIn 0.3s ease-out;
        }

        .delete-popup h3 {
            color: #dc3545;
            margin-bottom: 15px;
            font-size: 1.4rem;
        }

        .delete-popup p {
            color: #666;
            margin-bottom: 20px;
            line-height: 1.4;
        }

        .delete-popup .recipe-name {
            color: #dc3545;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .delete-popup .cahier-name {
            color: #8b4513;
            font-weight: bold;
        }

        .delete-actions {
            display: flex;
            gap: 10px;
        }

        .delete-btn {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
            color: white;
            border: none;
            border-radius: 15px;
            padding: 12px 20px;
            font-family: inherit;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s;
            flex: 1;
        }

        .delete-btn:hover {
            transform: translateY(-2px);
        }

        .cancel-btn {
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 15px;
            padding: 12px 20px;
            font-family: inherit;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s;
            flex: 1;
        }

        /* Emp√™cher le z-index conflict avec les cartes */
        .recipe-card {
            position: relative;
            z-index: 1;
        }

        .recipe-card:hover {
            z-index: 10;
        }

        /* Quick access buttons */
        .quick-access-btn {
            padding: 12px 8px;
            border: none;
            border-radius: 12px;
            font-family: inherit;
            font-weight: bold;
            font-size: 0.9rem;
            cursor: pointer;
            transition: transform 0.3s;
            border: 2px solid #d4b896;
        }

        .quick-access-btn:hover {
            transform: translateY(-2px);
        }

        /* Icon selector */
        .icon-selector {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        .icon-option {
            background: #f0e6d2;
            border: 2px solid #d4b896;
            border-radius: 10px;
            padding: 10px;
            font-size: 1.2rem;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 50px;
        }

        .icon-option:hover,
        .icon-option.selected {
            background: #8b4513;
            color: white;
            transform: scale(1.1);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <div class="header">
            <button class="back-btn hidden" onclick="goBack()">‚Üê</button>
            <h1 id="page-title">CocktailBook</h1>
        </div>

        <!-- Mes Cahiers -->
        <div id="mes-cahiers" class="content">
            <!-- CTA en haut -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px;">
                <button class="quick-access-btn" onclick="openCahier('Pages lik√©es')" style="background: linear-gradient(135deg, #ffe6e6 0%, #ffcccc 100%); color: #8b4513;">
                    ‚ù§Ô∏è Pages lik√©es
                </button>
                <button class="quick-access-btn" onclick="showPage('decouverte')" style="background: linear-gradient(135deg, #e6ffe6 0%, #ccffcc 100%); color: #8b4513;">
                    üí° D√©couverte
                </button>
            </div>

            <!-- Section Espace Personnel -->
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <h2 style="color: #8b4513; font-size: 1.2rem; margin: 0;">üìö Espace Personnel</h2>
                <button class="btn" onclick="showNewCahierModal()" style="background: #8b4513; color: white; padding: 8px 15px; font-size: 0.9rem;">
                    ‚ûï Nouveau
                </button>
            </div>

            <div class="cahier-grid" id="cahier-grid">
                <div class="cahier-card" onclick="openCahier('Cocktails d\'√©t√©')">
                    <h3>üå¥ Cocktails d'√©t√©</h3>
                    <p>12 recettes ‚Ä¢ Cr√©√© le 15/05</p>
                </div>
                <div class="cahier-card" onclick="openCahier('Classics')">
                    <h3>ü•É Classics</h3>
                    <p>8 recettes ‚Ä¢ Cr√©√© le 02/04</p>
                </div>
                <div class="cahier-card" onclick="openCahier('Sans alcool')">
                    <h3>üßä Sans alcool</h3>
                    <p>6 recettes ‚Ä¢ Cr√©√© le 20/03</p>
                </div>
            </div>
            
            <!-- Section Pro (cach√©e par d√©faut) -->
            <div id="pro-section" class="hidden" style="margin-top: 30px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <h2 style="color: #8b4513; font-size: 1.2rem; margin: 0;">üîí Espace Professionnel</h2>
                    <button class="btn" onclick="addProSpace()" style="background: #8b4513; color: white; padding: 8px 15px; font-size: 0.9rem;">
                        ‚ûï Ajouter un espace pro
                    </button>
                </div>
                <div class="cahier-card" onclick="openCahier('üìö Caf√© Central (Pro)')" style="background: linear-gradient(135deg, #f8f5f0 0%, #fff 100%); border-color: #8b4513; border-width: 3px;">
                    <h3>üìö Caf√© Central (Pro)</h3>
                    <p>3 recettes ‚Ä¢ Acc√®s Pro valid√©</p>
                </div>
            </div>
        </div>

        <!-- Vue d'un cahier -->
        <div id="cahier-view" class="content hidden">
            <div id="recipes-list">
                <!-- Les recettes seront ajout√©es dynamiquement -->
            </div>
            <button class="add-cahier-btn" onclick="showCreateRecipe()">
                ‚ûï Nouvelle recette
            </button>
        </div>

        <!-- Page de recette -->
        <div id="recipe-page" class="content hidden">
            <div class="recipe-page">
                <div class="recipe-flip" onclick="flipRecipe()">
                    <!-- Verso (face photo) -->
                    <div class="recipe-face recipe-verso">
                        <div class="recipe-image" id="recipe-image">üçπ</div>
                        <h2 id="recipe-name">Mojito</h2>
                        <p id="recipe-creator">@bartender_pro</p>
                        <div class="tags" id="recipe-tags">
                            <span class="tag">Fruit√©</span>
                            <span class="tag">Rafra√Æchissant</span>
                        </div>
                        <div class="recipe-actions">
                            <button class="btn btn-like" onclick="likeRecipe(event)">‚ù§Ô∏è</button>
                            <button class="btn btn-add" onclick="addToCahier(event)">Ajouter √† mon cahier</button>
                        </div>
                        <p style="text-align: center; margin-top: 15px; color: #666; font-style: italic;">
                            Cliquez pour voir la recette ‚Üí
                        </p>
                    </div>
                    
                    <!-- Recto (face recette) -->
                    <div class="recipe-face recipe-recto">
                        <h2>Ingr√©dients</h2>
                        <div class="ingredients" id="recipe-ingredients">
                            <div class="ingredient-item">
                                <span>Rhum blanc</span>
                                <span>4 cl</span>
                            </div>
                            <div class="ingredient-item">
                                <span>Menthe fra√Æche</span>
                                <span>8 feuilles</span>
                            </div>
                            <div class="ingredient-item">
                                <span>Citron vert</span>
                                <span>1/2</span>
                            </div>
                            <div class="ingredient-item">
                                <span>Sucre de canne</span>
                                <span>2 c. √† caf√©</span>
                            </div>
                            <div class="ingredient-item">
                                <span>Eau gazeuse</span>
                                <span>10 cl</span>
                            </div>
                        </div>
                        
                        <h2>Pr√©paration</h2>
                        <div class="steps">
                            <div class="step-item">Placer les feuilles de menthe et le sucre dans le verre</div>
                            <div class="step-item">Presser le citron vert au-dessus</div>
                            <div class="step-item">Piler d√©licatement pour lib√©rer les ar√¥mes</div>
                            <div class="step-item">Ajouter le rhum et m√©langer</div>
                            <div class="step-item">Remplir de glace pil√©e</div>
                            <div class="step-item">Compl√©ter avec l'eau gazeuse</div>
                        </div>
                        
                        <h2>Ustensiles</h2>
                        <p>Pilon, verre highball, paille</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Cr√©er une recette -->
        <div id="create-recipe" class="content hidden">
            <div>
                <div class="form-group">
                    <label>Nom du cocktail</label>
                    <input type="text" id="new-recipe-name" required>
                </div>
                
                <div class="form-group">
                    <label>Ingr√©dients (un par ligne, format: nom - quantit√©)</label>
                    <textarea id="new-recipe-ingredients" placeholder="Rhum blanc - 4 cl&#10;Menthe fra√Æche - 8 feuilles" required></textarea>
                </div>
                
                <div class="form-group">
                    <label>√âtapes de pr√©paration (une par ligne)</label>
                    <textarea id="new-recipe-steps" placeholder="Placer les feuilles de menthe dans le verre&#10;Ajouter le sucre" required></textarea>
                </div>
                
                <div class="form-group">
                    <label>Ustensiles</label>
                    <input type="text" id="new-recipe-tools" placeholder="Pilon, verre highball">
                </div>
                
                <div class="form-group">
                    <label>Tags (s√©par√©s par des virgules)</label>
                    <input type="text" id="new-recipe-tags" placeholder="fruit√©, rafra√Æchissant">
                </div>
                
                <div class="form-group">
                    <label>Visibilit√©</label>
                    <select id="new-recipe-visibility">
                        <option value="private">Priv√©e</option>
                        <option value="public">Publique</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Ajouter au cahier</label>
                    <select id="new-recipe-cahier">
                        <option value="Cocktails d'√©t√©">üå¥ Cocktails d'√©t√©</option>
                        <option value="Classics">ü•É Classics</option>
                        <option value="Sans alcool">üßä Sans alcool</option>
                        <option value="brouillon">üìù Brouillon</option>
                    </select>
                </div>
                
                <button type="button" class="add-cahier-btn" onclick="saveRecipe()">Cr√©er la recette</button>
            </div>
        </div>

        <!-- D√©couverte (Swipe) -->
        <div id="decouverte" class="content hidden">
            <div class="swipe-container">
                <div class="swipe-card" id="swipe-card-1">
                    <div class="recipe-flip" onclick="flipSwipeCard(1)">
                        <!-- Verso (face photo) -->
                        <div class="recipe-face recipe-verso">
                            <div class="recipe-image">üç∏</div>
                            <h2>Cosmopolitan</h2>
                            <p>@mixology_queen</p>
                            <div class="tags">
                                <span class="tag">√âl√©gant</span>
                                <span class="tag">Acidul√©</span>
                            </div>
                            <p style="text-align: center; margin-top: 15px; color: #666; font-style: italic; font-size: 0.9rem;">
                                Un cocktail embl√©matique de New York, parfait pour les soir√©es sophistiqu√©es. Cliquez pour voir la recette ‚Üí
                            </p>
                        </div>
                        <!-- Recto (face recette) -->
                        <div class="recipe-face recipe-recto">
                            <h3>Ingr√©dients</h3>
                            <div style="font-size: 0.9rem; margin-bottom: 15px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <span>Vodka</span><span>4 cl</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <span>Triple sec</span><span>1.5 cl</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <span>Jus de cranberry</span><span>3 cl</span>
                                </div>
                            </div>
                            <h3>Pr√©paration</h3>
                            <div style="font-size: 0.9rem;">
                                <p>1. Shaker tous les ingr√©dients</p>
                                <p>2. Filtrer dans un verre √† martini</p>
                                <p>3. Garnir d'un zeste de citron</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="swipe-card" id="swipe-card-2">
                    <div class="recipe-image">ü•É</div>
                    <h2>Old Fashioned</h2>
                    <p>@whiskey_master</p>
                    <div class="tags">
                        <span class="tag">Classic</span>
                        <span class="tag">Fort</span>
                    </div>
                    <p style="text-align: center; margin-top: 15px; color: #666; font-style: italic; font-size: 0.9rem;">
                        Le cocktail pr√©f√©r√© de Don Draper dans Mad Men. Un grand classique du whiskey am√©ricain.
                    </p>
                </div>
                <div class="swipe-card" id="swipe-card-3">
                    <div class="recipe-image">üçπ</div>
                    <h2>Pi√±a Colada</h2>
                    <p>@tropical_bar</p>
                    <div class="tags">
                        <span class="tag">Tropical</span>
                        <span class="tag">Cr√©meux</span>
                    </div>
                    <p style="text-align: center; margin-top: 15px; color: #666; font-style: italic; font-size: 0.9rem;">
                        L'√©vasion tropicale dans un verre ! Parfait pour r√™ver de plages de sable blanc.
                    </p>
                </div>
            </div>
            <div class="swipe-actions">
                <button class="swipe-btn swipe-reject" onclick="swipeReject()">‚úó</button>
                <button class="swipe-btn swipe-like" onclick="swipeLike()">‚ù§Ô∏è</button>
            </div>
        </div>

        <!-- Profil -->
        <div id="profil" class="content hidden">
            <div class="profile-header">
                <div class="profile-avatar">üë§</div>
                <h2>@marie_cocktails</h2>
                <p>Passionn√©e de mixologie üçπ<br>Bartender au Caf√© Central</p>
            </div>
            
            <div class="profile-stats">
                <div class="stat-item">
                    <div class="stat-number">23</div>
                    <div class="stat-label">Recettes cr√©√©es</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">156</div>
                    <div class="stat-label">Pages lik√©es</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">8</div>
                    <div class="stat-label">Cahiers</div>
                </div>
            </div>
            
            <div class="settings-item" onclick="showProSpace()">
                <span>üîí Espace Pro</span>
                <span>‚Üí</span>
            </div>
        </div>

        <!-- Param√®tres -->
        <div id="parametres" class="content hidden">
            <div class="settings-item">
                <span>üì± Notifications</span>
                <span>‚Üí</span>
            </div>
            <div class="settings-item">
                <span>üé® Th√®me</span>
                <span>‚Üí</span>
            </div>
            <div class="settings-item">
                <span>üì§ Exporter mes cahiers</span>
                <span>‚Üí</span>
            </div>
            <div class="settings-item" onclick="showProSpace()">
                <span>üîí Espace Pro</span>
                <span>‚Üí</span>
            </div>
            <div class="settings-item">
                <span>‚ÑπÔ∏è √Ä propos</span>
                <span>‚Üí</span>
            </div>
        </div>

        <!-- Espace Pro -->
        <div id="pro-space" class="content hidden">
            <div class="pro-code-input">
                <h2>Espace Professionnel</h2>
                <p>Entrez le code d'acc√®s √† 4 chiffres :</p>
                <input type="text" class="code-input" id="pro-code" maxlength="4" placeholder="----">
                <button class="add-cahier-btn" onclick="validateProCode()">Valider</button>
            </div>
            
            <div id="pro-content" class="hidden">
                <h2>üìö Cahier Professionnel - Caf√© Central</h2>
                <div class="recipe-card" onclick="viewRecipe('Signature Martini')">
                    <h4>Signature Martini</h4>
                    <p class="creator">Recette maison exclusive</p>
                    <div class="tags">
                        <span class="tag">Signature</span>
                        <span class="tag">Premium</span>
                    </div>
                </div>
                <div class="recipe-card" onclick="viewRecipe('Caf√© Cocktail')">
                    <h4>Caf√© Cocktail</h4>
                    <p class="creator">Sp√©cialit√© du chef barman</p>
                    <div class="tags">
                        <span class="tag">Caf√©</span>
                        <span class="tag">Original</span>
                    </div>
                </div>
                <div class="recipe-card" onclick="viewRecipe('Cocktail Maison')">
                    <h4>Cocktail de la Maison</h4>
                    <p class="creator">Cr√©ation saisonni√®re</p>
                    <div class="tags">
                        <span class="tag">Saisonnier</span>
                        <span class="tag">Exclusif</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modals -->
        <div id="modal-new-cahier" class="modal">
            <div class="modal-content">
                <h3>Nouveau cahier</h3>
                <div class="form-group">
                    <label>Nom du cahier *</label>
                    <input type="text" id="cahier-name" placeholder="Ex: Cocktails de f√™te" required>
                </div>
                <div class="form-group">
                    <label>Description (optionnelle)</label>
                    <input type="text" id="cahier-description" placeholder="Ex: Pour les occasions sp√©ciales">
                </div>
                <div class="form-group">
                    <label>Choisir une ic√¥ne</label>
                    <div class="icon-selector">
                        <div class="icon-option selected" data-icon="üçπ">üçπ</div>
                        <div class="icon-option" data-icon="ü•É">ü•É</div>
                        <div class="icon-option" data-icon="üç∏">üç∏</div>
                        <div class="icon-option" data-icon="üç∑">üç∑</div>
                        <div class="icon-option" data-icon="üßä">üßä</div>
                        <div class="icon-option" data-icon="üåø">üåø</div>
                        <div class="icon-option" data-icon="üçã">üçã</div>
                        <div class="icon-option" data-icon="ü••">ü••</div>
                        <div class="icon-option" data-icon="‚òï">‚òï</div>
                        <div class="icon-option" data-icon="üåü">üåü</div>
                        <div class="icon-option" data-icon="üéâ">üéâ</div>
                        <div class="icon-option" data-icon="üå∫">üå∫</div>
                    </div>
                </div>
                <button class="add-cahier-btn" onclick="createNewCahier()">Cr√©er le cahier</button>
                <button class="btn" onclick="hideModal('modal-new-cahier')" style="background: #ccc; color: #333; margin-top: 10px;">Annuler</button>
            </div>
        </div>

        <div id="modal-add-to-cahier" class="modal">
            <div class="modal-content">
                <h3>Ajouter √† un cahier</h3>
                <div class="form-group">
                    <select id="select-cahier">
                        <option value="Cocktails d'√©t√©">üå¥ Cocktails d'√©t√©</option>
                        <option value="Classics">ü•É Classics</option>
                        <option value="Sans alcool">üßä Sans alcool</option>
                    </select>
                </div>
                <button class="add-cahier-btn" onclick="confirmAddToCahier()">Ajouter</button>
                <button class="btn" onclick="hideModal('modal-add-to-cahier')" style="background: #ccc; color: #333; margin-top: 10px;">Annuler</button>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="nav-items">
                <div class="nav-item active" onclick="showPage('mes-cahiers')" id="nav-cahiers">
                    <span>üìò</span>
                    <small>Mes cahiers</small>
                </div>
                <div class="nav-item" onclick="showPage('decouverte')" id="nav-decouverte">
                    <span>üí°</span>
                    <small>D√©couverte</small>
                </div>
                <div class="nav-item" onclick="showPage('profil')" id="nav-profil">
                    <span>üë§</span>
                    <small>Profil</small>
                </div>
                <div class="nav-item" onclick="showPage('parametres')" id="nav-parametres">
                    <span>‚öôÔ∏è</span>
                    <small>Param√®tres</small>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data storage
        const cocktailData = {
            "Mojito": {
                image: "üçπ",
                creator: "@bartender_pro",
                tags: ["Fruit√©", "Rafra√Æchissant"],
                ingredients: [
                    ["Rhum blanc", "4 cl"],
                    ["Menthe fra√Æche", "8 feuilles"],
                    ["Citron vert", "1/2"],
                    ["Sucre de canne", "2 c. √† caf√©"],
                    ["Eau gazeuse", "10 cl"]
                ],
                steps: [
                    "Placer les feuilles de menthe et le sucre dans le verre",
                    "Presser le citron vert au-dessus",
                    "Piler d√©licatement pour lib√©rer les ar√¥mes",
                    "Ajouter le rhum et m√©langer",
                    "Remplir de glace pil√©e",
                    "Compl√©ter avec l'eau gazeuse"
                ],
                tools: "Pilon, verre highball, paille"
            },
            "Cosmopolitan": {
                image: "üç∏",
                creator: "@mixology_queen",
                tags: ["√âl√©gant", "Acidul√©"],
                ingredients: [
                    ["Vodka", "4 cl"],
                    ["Triple sec", "1.5 cl"],
                    ["Jus de cranberry", "3 cl"],
                    ["Jus de citron vert", "1 cl"]
                ],
                steps: [
                    "Verser tous les ingr√©dients dans un shaker",
                    "Ajouter de la glace",
                    "Shaker vigoureusement",
                    "Filtrer dans un verre √† martini",
                    "Garnir d'une rondelle de citron vert"
                ],
                tools: "Shaker, passoire, verre √† martini"
            },
            "Old Fashioned": {
                image: "ü•É",
                creator: "@whiskey_master",
                tags: ["Classic", "Fort"],
                ingredients: [
                    ["Whiskey bourbon", "6 cl"],
                    ["Sucre brun", "1 morceau"],
                    ["Angostura bitters", "2 traits"],
                    ["Orange", "1 zeste"]
                ],
                steps: [
                    "Placer le sucre dans un verre old fashioned",
                    "Ajouter les bitters et un peu d'eau",
                    "√âcraser le sucre pour le dissoudre",
                    "Ajouter le whiskey",
                    "Remuer avec de la glace",
                    "Garnir avec le zeste d'orange"
                ],
                tools: "Verre old fashioned, cuill√®re √† m√©lange"
            },
            "Pi√±a Colada": {
                image: "ü••",
                creator: "@tropical_bar",
                tags: ["Tropical", "Cr√©meux"],
                ingredients: [
                    ["Rhum blanc", "3 cl"],
                    ["Rhum ambr√©", "3 cl"],
                    ["Lait de coco", "9 cl"],
                    ["Jus d'ananas", "9 cl"],
                    ["Glace pil√©e", "2 tasses"]
                ],
                steps: [
                    "Verser tous les ingr√©dients dans un blender",
                    "Mixer jusqu'√† obtenir une consistance cr√©meuse",
                    "Verser dans un verre hurricane",
                    "Garnir d'un morceau d'ananas",
                    "Ajouter une cerise confite"
                ],
                tools: "Blender, verre hurricane"
            },
            "Margarita": {
                image: "üçã",
                creator: "@tequila_expert",
                tags: ["Mexicain", "Sal√©"],
                ingredients: [
                    ["Tequila", "5 cl"],
                    ["Triple sec", "2 cl"],
                    ["Jus de citron vert", "3 cl"],
                    ["Sel", "Pour le rebord"]
                ],
                steps: [
                    "Givrer le rebord du verre avec du sel",
                    "Verser la tequila dans un shaker",
                    "Ajouter le triple sec et le jus de citron",
                    "Shaker avec de la glace",
                    "Servir dans le verre givr√©"
                ],
                tools: "Shaker, verre √† margarita"
            },
            "Sangria": {
                image: "üç∑",
                creator: "@spanish_corner",
                tags: ["Fruit√©", "Partag√©"],
                ingredients: [
                    ["Vin rouge", "75 cl"],
                    ["Brandy", "10 cl"],
                    ["Sucre", "3 c. √† soupe"],
                    ["Orange", "1"],
                    ["Pomme", "1"],
                    ["Cannelle", "1 b√¢ton"]
                ],
                steps: [
                    "Couper les fruits en morceaux",
                    "M√©langer le vin et le brandy",
                    "Ajouter le sucre et remuer",
                    "Incorporer les fruits et la cannelle",
                    "Laisser mac√©rer 2 heures minimum",
                    "Servir bien frais"
                ],
                tools: "Carafe, couteau, cuill√®re"
            },
            "Moscow Mule": {
                image: "üßä",
                creator: "@copper_mug",
                tags: ["√âpic√©", "Rafra√Æchissant"],
                ingredients: [
                    ["Vodka", "5 cl"],
                    ["Jus de citron vert", "1.5 cl"],
                    ["Ginger beer", "15 cl"],
                    ["Glace", "Cubes"]
                ],
                steps: [
                    "Remplir un mug en cuivre de glace",
                    "Verser la vodka",
                    "Ajouter le jus de citron vert",
                    "Compl√©ter avec la ginger beer",
                    "Remuer d√©licatement",
                    "Garnir d'une rondelle de citron vert"
                ],
                tools: "Mug en cuivre, cuill√®re"
            },
            "Virgin Mojito": {
                image: "üåø",
                creator: "@zero_alcool",
                tags: ["Sans alcool", "Menthe"],
                ingredients: [
                    ["Menthe fra√Æche", "10 feuilles"],
                    ["Citron vert", "1/2"],
                    ["Sucre", "2 c. √† caf√©"],
                    ["Eau gazeuse", "15 cl"],
                    ["Glace pil√©e", "1 tasse"]
                ],
                steps: [
                    "Placer la menthe et le sucre dans le verre",
                    "Presser le citron vert",
                    "Piler pour lib√©rer les ar√¥mes",
                    "Ajouter la glace pil√©e",
                    "Compl√©ter avec l'eau gazeuse",
                    "Remuer et garnir de menthe"
                ],
                tools: "Pilon, verre highball"
            },
            "Signature Martini": {
                image: "üç∏",
                creator: "Chef Barman - Caf√© Central",
                tags: ["Signature", "Premium"],
                ingredients: [
                    ["Gin premium", "6 cl"],
                    ["Vermouth sec", "1 cl"],
                    ["Olive de Kalamata", "1"],
                    ["Zeste de citron", "1"]
                ],
                steps: [
                    "Refroidir le verre √† martini",
                    "Verser le gin et le vermouth dans un mixing glass",
                    "Ajouter de la glace et remuer 30 secondes",
                    "Filtrer dans le verre refroidi",
                    "Garnir avec l'olive et le zeste"
                ],
                tools: "Mixing glass, passoire, verre √† martini"
            },
            "Caf√© Cocktail": {
                image: "‚òï",
                creator: "Chef Barman - Caf√© Central",
                tags: ["Caf√©", "Original"],
                ingredients: [
                    ["Espresso", "4 cl"],
                    ["Rhum ambr√©", "3 cl"],
                    ["Liqueur de caf√©", "2 cl"],
                    ["Cr√®me", "2 cl"],
                    ["Sucre de canne", "1 c. √† caf√©"]
                ],
                steps: [
                    "Pr√©parer un espresso serr√©",
                    "Ajouter le sucre et remuer",
                    "Incorporer le rhum et la liqueur",
                    "Fouetter l√©g√®rement la cr√®me",
                    "D√©poser la cr√®me en surface"
                ],
                tools: "Machine √† caf√©, fouet, cuill√®re"
            },
            "Cocktail Maison": {
                image: "üåü",
                creator: "Chef Barman - Caf√© Central",
                tags: ["Saisonnier", "Exclusif"],
                ingredients: [
                    ["Vodka artisanale", "4 cl"],
                    ["Sirop de lavande", "2 cl"],
                    ["Jus de pamplemousse", "6 cl"],
                    ["Eau p√©tillante", "4 cl"],
                    ["Brin de lavande", "1"]
                ],
                steps: [
                    "Verser la vodka dans un shaker",
                    "Ajouter le sirop et le jus de pamplemousse",
                    "Shaker avec de la glace",
                    "Filtrer dans un verre √† vin",
                    "Compl√©ter avec l'eau p√©tillante",
                    "Garnir du brin de lavande"
                ],
                tools: "Shaker, passoire, verre √† vin"
            }
        };

        const cahiers = {
            "Cocktails d'√©t√©": ["Mojito", "Pi√±a Colada", "Sangria"],
            "Classics": ["Old Fashioned", "Margarita", "Cosmopolitan"],
            "Sans alcool": ["Virgin Mojito"],
            "Pages lik√©es": []
        };

        let currentCahier = '';
        let currentRecipe = '';
        let swipeIndex = 0;
        const swipeCards = ["Cosmopolitan", "Old Fashioned", "Pi√±a Colada", "Moscow Mule"];

        // Navigation functions
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.content').forEach(page => {
                page.classList.add('hidden');
            });
            
            // Remove active from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.remove('hidden');
            document.getElementById(`nav-${pageId === 'mes-cahiers' ? 'cahiers' : pageId}`).classList.add('active');
            
            // Update header
            const titles = {
                'mes-cahiers': 'Mes Cahiers',
                'decouverte': 'D√©couverte',
                'profil': 'Profil',
                'parametres': 'Param√®tres'
            };
            
            document.getElementById('page-title').textContent = titles[pageId] || 'CocktailBook';
            
            // Show/hide back button
            const backBtn = document.querySelector('.back-btn');
            if (pageId === 'mes-cahiers') {
                backBtn.classList.add('hidden');
            } else {
                backBtn.classList.remove('hidden');
            }
        }

        function goBack() {
            const currentPage = document.querySelector('.content:not(.hidden)').id;
            
            if (currentPage === 'cahier-view' || currentPage === 'recipe-page' || currentPage === 'create-recipe' || currentPage === 'pro-space') {
                showPage('mes-cahiers');
            } else {
                showPage('mes-cahiers');
            }
        }

        // Cahier functions
        function openCahier(cahierName) {
            currentCahier = cahierName;
            document.getElementById('page-title').textContent = cahierName;
            document.querySelector('.back-btn').classList.remove('hidden');
            
            const recipesList = document.getElementById('recipes-list');
            recipesList.innerHTML = '';
            
            const recipes = cahiers[cahierName] || [];
            const isProCahier = cahierName.includes('(Pro)');
            
            recipes.forEach((recipeName, index) => {
                const recipe = cocktailData[recipeName];
                if (recipe) {
                    const recipeCard = document.createElement('div');
                    recipeCard.className = 'recipe-card';
                    
                    // Cr√©er un ID unique pour cette recette
                    const recipeId = `recipe_${index}`;
                    
                    recipeCard.innerHTML = `
                        <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                            <div onclick="viewRecipe('${recipeName}')" style="flex: 1; cursor: pointer;">
                                <h4>${recipe.image} ${recipeName}</h4>
                                <p class="creator">${recipe.creator}</p>
                                <div class="tags">
                                    ${recipe.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                                </div>
                            </div>
                            ${!isProCahier ? `
                                <div class="recipe-menu">
                                    <button class="menu-dots" onclick="toggleRecipeMenu(event, '${recipeId}')">‚ãÆ</button>
                                    <div class="menu-dropdown" id="menu-${recipeId}">
                                        <div class="menu-item" onclick="editRecipeByIndex(${index})">
                                            ‚úèÔ∏è Modifier
                                        </div>
                                        <div class="menu-item" onclick="copyRecipeByIndex(${index})">
                                            üìÑ Cr√©er une copie
                                        </div>
                                        <div class="menu-item delete" onclick="deleteRecipeByIndex(${index})">
                                            üóëÔ∏è Supprimer
                                        </div>
                                    </div>
                                </div>
                            ` : ''}
                        </div>
                    `;
                    recipesList.appendChild(recipeCard);
                }
            });
            
            // Cacher le bouton "Nouvelle recette" pour les cahiers pro
            const addRecipeBtn = document.querySelector('#cahier-view .add-cahier-btn');
            if (isProCahier) {
                addRecipeBtn.style.display = 'none';
            } else {
                addRecipeBtn.style.display = 'block';
            }
            
            document.getElementById('mes-cahiers').classList.add('hidden');
            document.getElementById('cahier-view').classList.remove('hidden');
        }

        function toggleRecipeMenu(event, recipeId) {
            event.stopPropagation();
            
            // Fermer tous les autres menus
            document.querySelectorAll('.menu-dropdown').forEach(menu => {
                menu.classList.remove('show');
            });
            
            // Ouvrir/fermer le menu cliqu√©
            const menu = document.getElementById(`menu-${recipeId}`);
            if (menu) {
                menu.classList.toggle('show');
            }
        }

        function deleteRecipeByIndex(index) {
            console.log('deleteRecipeByIndex appel√©e avec index:', index);
            console.log('currentCahier:', currentCahier);
            console.log('cahiers[currentCahier]:', cahiers[currentCahier]);
            
            // Fermer tous les menus
            document.querySelectorAll('.menu-dropdown').forEach(menu => {
                menu.classList.remove('show');
            });
            
            if (!cahiers[currentCahier]) {
                alert('Erreur : cahier non trouv√©');
                return;
            }
            
            if (index < 0 || index >= cahiers[currentCahier].length) {
                alert('Erreur : index invalide');
                return;
            }
            
            const recipeName = cahiers[currentCahier][index];
            console.log('Recette √† supprimer:', recipeName);
            
            // Afficher le pop-up de confirmation de suppression
            showDeleteConfirmation(recipeName, index);
        }

        function showDeleteConfirmation(recipeName, index) {
            const overlay = document.createElement('div');
            overlay.className = 'delete-overlay';
            overlay.innerHTML = `
                <div class="delete-popup">
                    <h3>üóëÔ∏è Supprimer la recette</h3>
                    <p>
                        √ätes-vous s√ªr de vouloir supprimer<br>
                        <span class="recipe-name">"${recipeName}"</span><br>
                        du cahier<br>
                        <span class="cahier-name">${currentCahier}</span> ?
                    </p>
                    <div class="delete-actions">
                        <button class="cancel-btn" onclick="closeDeleteConfirmation()">
                            Annuler
                        </button>
                        <button class="delete-btn" onclick="confirmDeleteRecipe(${index})">
                            Supprimer
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(overlay);
        }

        function confirmDeleteRecipe(index) {
            const recipeName = cahiers[currentCahier][index];
            
            // Supprimer par index
            cahiers[currentCahier].splice(index, 1);
            
            console.log('Apr√®s suppression:', cahiers[currentCahier]);
            
            // Fermer le pop-up de confirmation
            closeDeleteConfirmation();
            
            // Afficher le pop-up de succ√®s
            showDeleteSuccess(recipeName);
            
            // Mettre √† jour le compteur
            updateCahierCardCount(currentCahier);
            
            // Recharger la vue
            openCahier(currentCahier);
        }

        function showDeleteSuccess(recipeName) {
            const overlay = document.createElement('div');
            overlay.className = 'confirmation-overlay';
            overlay.innerHTML = `
                <div class="confirmation-popup" style="border-color: #dc3545;">
                    <h3 style="color: #dc3545;">üóëÔ∏è Recette supprim√©e !</h3>
                    <p>
                        <span class="recipe-name">"${recipeName}"</span><br>
                        a √©t√© supprim√©e du cahier<br>
                        <span class="cahier-name">${currentCahier}</span>
                    </p>
                    <button class="confirmation-btn" style="background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);" onclick="closeDeleteSuccess()">
                        Compris
                    </button>
                </div>
            `;
            
            document.body.appendChild(overlay);
            
            // Auto-fermeture apr√®s 3 secondes
            setTimeout(() => {
                if (document.body.contains(overlay)) {
                    closeDeleteSuccess();
                }
            }, 3000);
        }

        function closeDeleteConfirmation() {
            const overlay = document.querySelector('.delete-overlay');
            if (overlay) {
                document.body.removeChild(overlay);
            }
        }

        function closeDeleteSuccess() {
            const overlay = document.querySelector('.confirmation-overlay');
            if (overlay) {
                document.body.removeChild(overlay);
            }
        }

        function editRecipeByIndex(index) {
            const recipeName = cahiers[currentCahier][index];
            const recipe = cocktailData[recipeName];
            if (!recipe) return;
            
            // Remplir le formulaire avec les donn√©es existantes
            document.getElementById('new-recipe-name').value = recipeName;
            document.getElementById('new-recipe-ingredients').value = recipe.ingredients.map(([name, qty]) => `${name} - ${qty}`).join('\n');
            document.getElementById('new-recipe-steps').value = recipe.steps.join('\n');
            document.getElementById('new-recipe-tools').value = recipe.tools;
            document.getElementById('new-recipe-tags').value = recipe.tags.join(', ');
            document.getElementById('new-recipe-cahier').value = currentCahier;
            
            // Marquer comme modification
            window.editingRecipe = recipeName;
            
            showCreateRecipe();
            document.getElementById('page-title').textContent = 'Modifier la recette';
            
            // Fermer le menu
            document.querySelectorAll('.menu-dropdown').forEach(menu => {
                menu.classList.remove('show');
            });
        }

        function copyRecipeByIndex(index) {
            const recipeName = cahiers[currentCahier][index];
            const recipe = cocktailData[recipeName];
            if (!recipe) return;
            
            // Remplir le formulaire avec les donn√©es + "Copie de"
            document.getElementById('new-recipe-name').value = `Copie de ${recipeName}`;
            document.getElementById('new-recipe-ingredients').value = recipe.ingredients.map(([name, qty]) => `${name} - ${qty}`).join('\n');
            document.getElementById('new-recipe-steps').value = recipe.steps.join('\n');
            document.getElementById('new-recipe-tools').value = recipe.tools;
            document.getElementById('new-recipe-tags').value = recipe.tags.join(', ');
            document.getElementById('new-recipe-cahier').value = currentCahier;
            
            showCreateRecipe();
            document.getElementById('page-title').textContent = 'Copier la recette';
            
            // Fermer le menu
            document.querySelectorAll('.menu-dropdown').forEach(menu => {
                menu.classList.remove('show');
            });
        }

        function viewRecipe(recipeName) {
            currentRecipe = recipeName;
            const recipe = cocktailData[recipeName];
            
            if (!recipe) return;
            
            document.getElementById('page-title').textContent = recipeName;
            
            // Update verso
            document.getElementById('recipe-image').textContent = recipe.image;
            document.getElementById('recipe-name').textContent = recipeName;
            document.getElementById('recipe-creator').textContent = recipe.creator;
            document.getElementById('recipe-tags').innerHTML = 
                recipe.tags.map(tag => `<span class="tag">${tag}</span>`).join('');
            
            // Update recto
            document.getElementById('recipe-ingredients').innerHTML = 
                recipe.ingredients.map(([name, qty]) => 
                    `<div class="ingredient-item"><span>${name}</span><span>${qty}</span></div>`
                ).join('');
            
            const stepsContainer = document.querySelector('.steps');
            stepsContainer.innerHTML = recipe.steps.map(step => 
                `<div class="step-item">${step}</div>`
            ).join('');
            
            document.querySelector('.recipe-recto h2:last-of-type + p').textContent = recipe.tools;
            
            // Reset flip
            document.querySelector('.recipe-flip').classList.remove('flipped');
            
            document.querySelector('.content:not(.hidden)').classList.add('hidden');
            document.getElementById('recipe-page').classList.remove('hidden');
        }

        function flipRecipe() {
            document.querySelector('.recipe-flip').classList.toggle('flipped');
        }

        function likeRecipe(event) {
            event.stopPropagation();
            
            if (!cahiers["Pages lik√©es"].includes(currentRecipe)) {
                cahiers["Pages lik√©es"].push(currentRecipe);
                alert(`${currentRecipe} ajout√© aux pages lik√©es !`);
            } else {
                alert(`${currentRecipe} est d√©j√† dans vos pages lik√©es !`);
            }
        }

        function addToCahier(event) {
            event.stopPropagation();
            showModal('modal-add-to-cahier');
        }

        // Create recipe functions
        function showCreateRecipe() {
            document.getElementById('page-title').textContent = 'Nouvelle recette';
            document.querySelector('.back-btn').classList.remove('hidden');
            
            document.querySelector('.content:not(.hidden)').classList.add('hidden');
            document.getElementById('create-recipe').classList.remove('hidden');
        }

        function saveRecipe() {
            const name = document.getElementById('new-recipe-name').value.trim();
            const ingredientsText = document.getElementById('new-recipe-ingredients').value;
            const stepsText = document.getElementById('new-recipe-steps').value;
            const tools = document.getElementById('new-recipe-tools').value;
            const tagsText = document.getElementById('new-recipe-tags').value;
            const cahier = document.getElementById('new-recipe-cahier').value;
            
            if (!name) {
                alert('Le nom de la recette est obligatoire !');
                return;
            }
            
            // Parse ingredients
            const ingredients = ingredientsText.split('\n').map(line => {
                const parts = line.split(' - ');
                return [parts[0].trim(), parts[1] ? parts[1].trim() : ''];
            }).filter(ingredient => ingredient[0]);
            
            // Parse steps
            const steps = stepsText.split('\n').map(step => step.trim()).filter(step => step);
            
            // Parse tags
            const tags = tagsText.split(',').map(tag => tag.trim()).filter(tag => tag);
            
            // Si on modifie une recette existante
            if (window.editingRecipe) {
                // Supprimer l'ancienne version des cahiers
                Object.keys(cahiers).forEach(cahierName => {
                    const index = cahiers[cahierName].indexOf(window.editingRecipe);
                    if (index > -1) {
                        cahiers[cahierName].splice(index, 1);
                    }
                });
                
                // Supprimer l'ancienne recette des donn√©es
                delete cocktailData[window.editingRecipe];
                
                // Reset du flag d'√©dition
                window.editingRecipe = null;
            }
            
            // Create recipe object
            cocktailData[name] = {
                image: "üç∏",
                creator: "@marie_cocktails",
                tags: tags.length > 0 ? tags : ['Nouveau'],
                ingredients: ingredients.length > 0 ? ingredients : [['Ingr√©dient', 'Quantit√©']],
                steps: steps.length > 0 ? steps : ['√âtape de pr√©paration'],
                tools: tools || 'Non sp√©cifi√©'
            };
            
            // Add to cahier
            if (!cahiers[cahier]) {
                cahiers[cahier] = [];
            }
            cahiers[cahier].push(name);
            
            // Mettre √† jour le compteur de recettes dans la carte du cahier
            updateCahierCardCount(cahier);
            
            // Afficher le pop-up de confirmation
            showConfirmationPopup(name, cahier);
            
            // Clear form
            document.getElementById('new-recipe-name').value = '';
            document.getElementById('new-recipe-ingredients').value = '';
            document.getElementById('new-recipe-steps').value = '';
            document.getElementById('new-recipe-tools').value = '';
            document.getElementById('new-recipe-tags').value = '';
        }

        function showConfirmationPopup(recipeName, cahierName) {
            const overlay = document.createElement('div');
            overlay.className = 'confirmation-overlay';
            overlay.innerHTML = `
                <div class="confirmation-popup">
                    <h3>‚úÖ Recette cr√©√©e !</h3>
                    <p>
                        <span class="recipe-name">"${recipeName}"</span><br>
                        a √©t√© ajout√©e au cahier<br>
                        <span class="cahier-name">${cahierName}</span>
                    </p>
                    <button class="confirmation-btn" onclick="closeConfirmationPopup()">
                        Parfait !
                    </button>
                </div>
            `;
            
            document.body.appendChild(overlay);
            
            // Auto-fermeture apr√®s 4 secondes
            setTimeout(() => {
                if (document.body.contains(overlay)) {
                    closeConfirmationPopup();
                }
            }, 4000);
        }

        function closeConfirmationPopup() {
            const overlay = document.querySelector('.confirmation-overlay');
            if (overlay) {
                document.body.removeChild(overlay);
                // Retourner aux cahiers apr√®s fermeture du popup
                showPage('mes-cahiers');
            }
        }

        // Swipe functions
        function flipSwipeCard(cardNumber) {
            const card = document.getElementById(`swipe-card-${cardNumber}`);
            const flipElement = card.querySelector('.recipe-flip');
            if (flipElement) {
                flipElement.classList.toggle('flipped');
            }
        }

        function updateSwipeCard() {
            const card = document.getElementById('swipe-card-1');
            const recipeName = swipeCards[swipeIndex];
            const recipe = cocktailData[recipeName];
            
            if (recipe) {
                const descriptions = {
                    "Cosmopolitan": "Un cocktail embl√©matique de New York, parfait pour les soir√©es sophistiqu√©es. Cliquez pour voir la recette ‚Üí",
                    "Old Fashioned": "Le cocktail pr√©f√©r√© de Don Draper dans Mad Men. Un grand classique du whiskey am√©ricain.",
                    "Pi√±a Colada": "L'√©vasion tropicale dans un verre ! Parfait pour r√™ver de plages de sable blanc.",
                    "Moscow Mule": "Le cocktail qui a rendu les mugs en cuivre populaires. Frais et √©pic√© √† souhait."
                };
                
                card.innerHTML = `
                    <div class="recipe-flip" onclick="flipSwipeCard(1)">
                        <!-- Verso (face photo) -->
                        <div class="recipe-face recipe-verso">
                            <div class="recipe-image">${recipe.image}</div>
                            <h2>${recipeName}</h2>
                            <p>${recipe.creator}</p>
                            <div class="tags">
                                ${recipe.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                            </div>
                            <p style="text-align: center; margin-top: 15px; color: #666; font-style: italic; font-size: 0.9rem;">
                                ${descriptions[recipeName] || "Un d√©licieux cocktail √† d√©couvrir. Cliquez pour voir la recette ‚Üí"}
                            </p>
                        </div>
                        <!-- Recto (face recette) -->
                        <div class="recipe-face recipe-recto">
                            <h3>Ingr√©dients</h3>
                            <div style="font-size: 0.9rem; margin-bottom: 15px;">
                                ${recipe.ingredients.slice(0, 3).map(([name, qty]) => 
                                    `<div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                        <span>${name}</span><span>${qty}</span>
                                    </div>`
                                ).join('')}
                            </div>
                            <h3>Pr√©paration</h3>
                            <div style="font-size: 0.9rem;">
                                ${recipe.steps.slice(0, 3).map((step, index) => 
                                    `<p>${index + 1}. ${step}</p>`
                                ).join('')}
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        function swipeLike() {
            const recipeName = swipeCards[swipeIndex];
            if (!cahiers["Pages lik√©es"].includes(recipeName)) {
                cahiers["Pages lik√©es"].push(recipeName);
            }
            
            swipeIndex = (swipeIndex + 1) % swipeCards.length;
            updateSwipeCard();
            
            // Animation
            const card = document.getElementById('swipe-card-1');
            card.style.transform = 'translateX(100%) rotate(30deg)';
            setTimeout(() => {
                card.style.transform = '';
            }, 300);
        }

        function swipeReject() {
            swipeIndex = (swipeIndex + 1) % swipeCards.length;
            updateSwipeCard();
            
            // Animation
            const card = document.getElementById('swipe-card-1');
            card.style.transform = 'translateX(-100%) rotate(-30deg)';
            setTimeout(() => {
                card.style.transform = '';
            }, 300);
        }

        // Modal functions
        function showModal(modalId) {
            document.getElementById(modalId).classList.add('show');
        }

        function hideModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
        }

        function showNewCahierModal() {
            showModal('modal-new-cahier');
        }

        function createNewCahier() {
            const name = document.getElementById('cahier-name').value.trim();
            const description = document.getElementById('cahier-description').value.trim();
            const selectedIcon = document.querySelector('.icon-option.selected');
            
            if (!name) {
                alert('Le nom du cahier est obligatoire !');
                return;
            }
            
            const icon = selectedIcon ? selectedIcon.dataset.icon : 'üìî';
            const fullName = `${icon} ${name}`;
            
            // Cr√©er le nouveau cahier
            cahiers[fullName] = [];
            
            // Ajouter la carte dans la grille
            const cahierGrid = document.getElementById('cahier-grid');
            const newCard = document.createElement('div');
            newCard.className = 'cahier-card';
            newCard.onclick = () => openCahier(fullName);
            
            const today = new Date();
            const dateStr = `${today.getDate().toString().padStart(2, '0')}/${(today.getMonth() + 1).toString().padStart(2, '0')}`;
            
            newCard.innerHTML = `
                <h3>${fullName}</h3>
                <p>0 recettes ‚Ä¢ Cr√©√© le ${dateStr}${description ? '<br>' + description : ''}</p>
            `;
            
            cahierGrid.appendChild(newCard);
            
            // Ajouter le nouveau cahier au select de cr√©ation de recette
            updateRecipeSelect();
            
            // Reset du formulaire
            document.getElementById('cahier-name').value = '';
            document.getElementById('cahier-description').value = '';
            document.querySelectorAll('.icon-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.querySelector('.icon-option[data-icon="üçπ"]').classList.add('selected');
            
            hideModal('modal-new-cahier');
            alert(`Cahier "${fullName}" cr√©√© avec succ√®s !`);
        }

        function updateRecipeSelect() {
            const select = document.getElementById('new-recipe-cahier');
            select.innerHTML = '';
            
            // Ajouter les cahiers personnels
            Object.keys(cahiers).forEach(cahierName => {
                if (!cahierName.includes('(Pro)') && cahierName !== 'Pages lik√©es') {
                    const option = document.createElement('option');
                    option.value = cahierName;
                    option.textContent = cahierName;
                    select.appendChild(option);
                }
            });
            
            // Ajouter l'option brouillon
            const brouillonOption = document.createElement('option');
            brouillonOption.value = 'brouillon';
            brouillonOption.textContent = 'üìù Brouillon';
            select.appendChild(brouillonOption);
        }

        function updateCahierCardCount(cahierName) {
            // Trouver la carte correspondante et mettre √† jour le nombre de recettes
            const cahierCards = document.querySelectorAll('.cahier-card');
            cahierCards.forEach(card => {
                const cardTitle = card.querySelector('h3').textContent;
                if (cardTitle === cahierName) {
                    const recipeCount = cahiers[cahierName] ? cahiers[cahierName].length : 0;
                    const pElement = card.querySelector('p');
                    const currentText = pElement.innerHTML;
                    const updatedText = currentText.replace(/\d+ recettes/, `${recipeCount} recettes`);
                    pElement.innerHTML = updatedText;
                }
            });
        }

        function confirmAddToCahier() {
            const selectedCahier = document.getElementById('select-cahier').value;
            if (!cahiers[selectedCahier].includes(currentRecipe)) {
                cahiers[selectedCahier].push(currentRecipe);
                alert(`${currentRecipe} ajout√© au cahier ${selectedCahier} !`);
            } else {
                alert(`${currentRecipe} est d√©j√† dans ce cahier !`);
            }
            hideModal('modal-add-to-cahier');
        }

        // Pro space functions
        function showProSpace() {
            document.getElementById('page-title').textContent = 'Espace Pro';
            document.querySelector('.back-btn').classList.remove('hidden');
            
            document.querySelector('.content:not(.hidden)').classList.add('hidden');
            document.getElementById('pro-space').classList.remove('hidden');
        }

        function validateProCode() {
            const code = document.getElementById('pro-code').value;
            if (code === '1234') {
                document.querySelector('.pro-code-input').classList.add('hidden');
                document.getElementById('pro-content').classList.remove('hidden');
                
                // Ajouter le cahier pro aux cahiers disponibles
                cahiers["üìö Caf√© Central (Pro)"] = ["Signature Martini", "Caf√© Cocktail", "Cocktail Maison"];
                
                // Afficher la section pro dans "Mes cahiers"
                document.getElementById('pro-section').classList.remove('hidden');
                
                alert('Code valid√© ! Le cahier professionnel est maintenant disponible dans "Mes cahiers".');
            } else {
                alert('Code incorrect. Essayez "1234" pour la d√©mo.');
            }
        }

        function updateCahiersGrid() {
            // Cette fonction n'est plus n√©cessaire puisque nous gardons le HTML statique
            // et nous montrons/cachons simplement la section pro
        }

        function addProSpace() {
            alert('Fonctionnalit√© "Ajouter un espace pro" - Permettrait de scanner un QR code ou entrer un code d\'invitation pour rejoindre un nouvel espace professionnel.');
        }

        function getRandomDate() {
            const dates = ['15/05', '02/04', '20/03', '10/06', '25/04'];
            return dates[Math.floor(Math.random() * dates.length)];
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateSwipeCard();
            updateRecipeSelect();
            
            // Icon selector functionality
            document.querySelectorAll('.icon-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.icon-option').forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                });
            });
            
            // Close modals when clicking outside
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        modal.classList.remove('show');
                    }
                });
            });
            
            // Close recipe menus when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.recipe-menu')) {
                    document.querySelectorAll('.menu-dropdown').forEach(menu => {
                        menu.classList.remove('show');
                    });
                }
            });
        });
    </script>